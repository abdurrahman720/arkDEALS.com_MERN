{"ast":null,"code":"import _objectSpread from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{useForm}from'react-hook-form';import{Link,useNavigate}from'react-router-dom';import{toast}from'react-toastify';import{AuthContext}from'../../Context/AuthProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SellerLogin=function SellerLogin(){var _errors$email,_errors$password;var _useContext=useContext(AuthContext),emailSignIn=_useContext.emailSignIn,googleSign=_useContext.googleSign,isLoading=_useContext.isLoading;var navigate=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),loginError=_useState2[0],setLoginError=_useState2[1];var handleLogin=function handleLogin(data){setLoginError('');console.log(data);emailSignIn(data.email,data.password).then(function(userCredentials){var user=userCredentials.user;console.log(user);//jwt token\nfetch(\"http://localhost:5001/jwt?email=\".concat(user===null||user===void 0?void 0:user.email)).then(function(res){return res.json();}).then(function(data){console.log(data.accessToken);localStorage.setItem('arkDeals',data.accessToken);toast.success(\"Login SuccessFully!\");navigate('/dashboard');});}).catch(function(err){setLoginError(err.message);isLoading(false);});};var handleGoogleSign=function handleGoogleSign(){googleSign().then(function(res){var signedUser=res.user;console.log(signedUser);var user={name:signedUser.displayName,email:signedUser.email,role:\"buyer\"};fetch(\"http://localhost:5001/add-users\",{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){if(data.acknowledged){//jwt token\nfetch(\"http://localhost:5001/jwt?email=\".concat(user===null||user===void 0?void 0:user.email)).then(function(res){return res.json();}).then(function(data){console.log(data.accessToken);localStorage.setItem(\"arkDeals\",data.accessToken);toast.success(\"Registration Success as Buyer!\");navigate(\"/dashboard\");});}});}).catch(function(err){setLoginError(err.message);isLoading(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"hero min-h-screen bg-base-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content flex-col lg:flex-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center lg:text-left\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold\",children:\"Login now!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"py-6\",children:\"Sell your unused laptops and get the best price only on arkDEALS.com!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleLogin),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl text-center\",children:\"Login as Seller\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full max-w-xs\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Email\"})]}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register(\"email\",{required:\"Email Address is required\"})),{},{className:\"input input-bordered w-full max-w-xs\"})),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full max-w-xs\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\"},register(\"password\",{required:\"Password is required\",minLength:{value:6,message:'Password must be 6 characters or longer'}})),{},{className:\"input input-bordered w-full max-w-xs\"})),/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Forget Password?\"})]}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-accent w-full\",value:\"Login\",type:\"submit\"}),/*#__PURE__*/_jsx(\"div\",{children:loginError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:loginError})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"New to arkDEALS.com? \",/*#__PURE__*/_jsx(Link,{className:\"text-secondary\",to:\"/seller-register\",children:\"Register as Seller\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\",children:\"OR\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGoogleSign,className:\"btn btn-outline btn-secondary w-full\",children:\"CONTINUE WITH GOOGLE\"})]})})]})});};export default SellerLogin;","map":{"version":3,"names":["React","useContext","useState","useForm","Link","useNavigate","toast","AuthContext","SellerLogin","emailSignIn","googleSign","isLoading","navigate","register","handleSubmit","errors","formState","loginError","setLoginError","handleLogin","data","console","log","email","password","then","userCredentials","user","fetch","res","json","accessToken","localStorage","setItem","success","catch","err","message","handleGoogleSign","signedUser","name","displayName","role","method","headers","body","JSON","stringify","acknowledged","required","minLength","value"],"sources":["/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/src/Pages/AuthPages/SellerLogin.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { AuthContext } from '../../Context/AuthProvider';\n\nconst SellerLogin = () => {\n    const { emailSignIn, googleSign,isLoading } = useContext(AuthContext);\n    const navigate = useNavigate()\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n      } = useForm();\n        \n        const [loginError, setLoginError] = useState('');\n        \n        const handleLogin = (data) => {\n            setLoginError('')\n            console.log(data);\n            emailSignIn(data.email, data.password)\n                .then(userCredentials => {\n                    const user = userCredentials.user;\n                    console.log(user);\n                    //jwt token\n                    fetch(`http://localhost:5001/jwt?email=${user?.email}`)\n                                        .then(res => res.json())\n                        .then(data => {\n                                            console.log(data.accessToken);\n                                            localStorage.setItem('arkDeals', data.accessToken);\n                                            toast.success(\"Login SuccessFully!\")\n                                            navigate('/dashboard')\n                                    })\n    \n                }).catch(err => {\n                  setLoginError(err.message);\n                  isLoading(false)\n            })\n        }\n    \n        const handleGoogleSign = () => {\n            googleSign().then((res) => {\n              const signedUser = res.user;\n              console.log(signedUser);\n              const user = {\n                name: signedUser.displayName,\n                email: signedUser.email,\n                role: \"buyer\",\n              };\n              fetch(`http://localhost:5001/add-users`, {\n                method: \"POST\",\n                headers: {\n                  \"content-type\": \"application/json\",\n                },\n                body: JSON.stringify(user),\n              })\n                .then((res) => res.json())\n                .then((data) => {\n                  if (data.acknowledged) {\n                    //jwt token\n                    fetch(`http://localhost:5001/jwt?email=${user?.email}`)\n                      .then((res) => res.json())\n                      .then((data) => {\n                        console.log(data.accessToken);\n                        localStorage.setItem(\"arkDeals\", data.accessToken);\n                        toast.success(\"Registration Success as Buyer!\");\n                        navigate(\"/dashboard\");\n                      });\n                  }\n                });\n            }).catch(err => {\n              setLoginError(err.message)\n              isLoading(false)\n            })\n          };\n        \n      return (\n        <div className=\"hero min-h-screen bg-base-200\">\n          <div className=\"hero-content flex-col lg:flex-row\">\n            <div className=\"text-center lg:text-left\">\n              <h1 className=\"text-5xl font-bold\">Login now!</h1>\n              <p className=\"py-6\">\n               Sell your unused laptops and get the best price only on arkDEALS.com!\n              </p>\n            </div>\n            <div className=\"card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100\">\n                      <div className=\"card-body\">\n                      <form onSubmit={handleSubmit(handleLogin)} >\n                        <h2 className=\"text-2xl text-center\">Login as Seller</h2>\n                        <div className=\"form-control w-full max-w-xs\">\n                            <label className=\"label\"> <span className=\"label-text\">Email</span></label>\n                            <input type=\"text\"\n                                {...register(\"email\", {\n                                    required: \"Email Address is required\"\n                                })}\n                                className=\"input input-bordered w-full max-w-xs\" />\n                            {errors.email && <p className='text-red-600'>{errors.email?.message}</p>}\n                        </div>\n                        <div className=\"form-control w-full max-w-xs\">\n                            <label className=\"label\"> <span className=\"label-text\">Password</span></label>\n                            <input type=\"password\"\n                                {...register(\"password\", {\n                                    required: \"Password is required\",\n                                    minLength: { value: 6, message: 'Password must be 6 characters or longer' }\n                                })}\n                                className=\"input input-bordered w-full max-w-xs\" />\n                            <label className=\"label\"> <span className=\"label-text\">Forget Password?</span></label>\n                            {errors.password && <p className='text-red-600'>{errors.password?.message}</p>}\n                        </div>\n                        <input className='btn btn-accent w-full' value=\"Login\" type=\"submit\" />\n                        <div>\n                            {loginError && <p className='text-red-600'>{loginError}</p>}\n                        </div>\n                          </form>\n                          <p className='text-sm'>New to arkDEALS.com? <Link className='text-secondary' to=\"/seller-register\">Register as Seller</Link></p>\n                    <div className=\"divider\">OR</div>\n                    <button\n              onClick={handleGoogleSign}\n              className=\"btn btn-outline btn-secondary w-full\"\n            >\n              CONTINUE WITH GOOGLE\n            </button>\n                      </div>\n                     \n            </div>\n          </div>\n        </div>\n      );\n};\n\nexport default SellerLogin;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}