{"ast":null,"code":"import _slicedToArray from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useQuery}from\"@tanstack/react-query\";import React,{useState}from\"react\";import{toast}from\"react-toastify\";import AllbuyerTable from\"../../../Components/AllbuyerTable\";import ConfirmationModal from\"../../../Components/ConfirmationModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Allbuyer=function Allbuyer(){var _useQuery=useQuery({queryKey:[\"buyers\"],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://ark-deals-server.vercel.app/allbuyers\",{headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"arkDeals\"))}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}},_callee);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}()}),_useQuery$data=_useQuery.data,buyers=_useQuery$data===void 0?[]:_useQuery$data,refetch=_useQuery.refetch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),deletingBuyer=_useState2[0],setDeletingBuyer=_useState2[1];var confirmationModal=function confirmationModal(user){setDeletingBuyer(user);};var closeModal=function closeModal(){setDeletingBuyer(null);};var handleDelete=function handleDelete(user){console.log(user);fetch(\"https://ark-deals-server.vercel.app/buyer-orders-delete/\".concat(user===null||user===void 0?void 0:user.email),{method:\"DELETE\",headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);fetch(\"https://ark-deals-server.vercel.app/user-delete/\".concat(user===null||user===void 0?void 0:user.email),{method:\"DELETE\",headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);refetch();toast.success(\"User has been deleted successfully\");toast.warn(\"Don't forget to delete this user from Firebase!\");});});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-base-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl\",children:\"All Buyer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto w-full\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Seller Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:buyers.map(function(buyer,i){return/*#__PURE__*/_jsx(AllbuyerTable,{buyer:buyer,confirmationModal:confirmationModal,i:i},buyer._id);})})]})})]}),deletingBuyer&&/*#__PURE__*/_jsx(ConfirmationModal,{title:\"Your are deleting \".concat(deletingBuyer.name),message:\"Everything associated with this email: \".concat(deletingBuyer.name,\"  will be deleted from database. \\n          Since your are using firebase authentication, you must delete \").concat(deletingBuyer.email,\" from there manually!\"),successAction:handleDelete,successButtonName:\"Delete\",modalData:deletingBuyer,closeModal:closeModal})]});};export default Allbuyer;","map":{"version":3,"names":["useQuery","React","useState","toast","AllbuyerTable","ConfirmationModal","Allbuyer","queryKey","queryFn","fetch","headers","authorization","localStorage","getItem","res","json","data","buyers","refetch","deletingBuyer","setDeletingBuyer","confirmationModal","user","closeModal","handleDelete","console","log","email","method","then","success","warn","map","buyer","i","_id","name"],"sources":["/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/src/Pages/Dashboard/Admin/Allbuyer.jsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport React, { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport AllbuyerTable from \"../../../Components/AllbuyerTable\";\nimport ConfirmationModal from \"../../../Components/ConfirmationModal\";\n\nconst Allbuyer = () => {\n  const { data: buyers = [], refetch } = useQuery({\n    queryKey: [\"buyers\"],\n    queryFn: async () => {\n      const res = await fetch(`https://ark-deals-server.vercel.app/allbuyers`, {\n        headers: {\n          authorization: `Bearer ${localStorage.getItem(\"arkDeals\")}`,\n        },\n      });\n      const data = await res.json();\n      return data;\n    },\n  });\n\n  const [deletingBuyer, setDeletingBuyer] = useState(null);\n\n  const confirmationModal = (user) => {\n    setDeletingBuyer(user);\n  };\n  const closeModal = () => {\n    setDeletingBuyer(null);\n  };\n\n  const handleDelete = (user) => {\n    console.log(user);\n    fetch(\n      `https://ark-deals-server.vercel.app/buyer-orders-delete/${user?.email}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          authorization: `Bearer ${localStorage.getItem(\"arkDeals\")}`,\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        fetch(\n          `https://ark-deals-server.vercel.app/user-delete/${user?.email}`,\n          {\n            method: \"DELETE\",\n            headers: {\n              authorization: `Bearer ${localStorage.getItem(\"arkDeals\")}`,\n            },\n          }\n        )\n          .then((res) => res.json())\n          .then((data) => {\n            console.log(data);\n            refetch();\n            toast.success(\"User has been deleted successfully\");\n            toast.warn(\"Don't forget to delete this user from Firebase!\");\n          });\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"bg-base-100\">\n        <h2 className=\"text-center text-xl\">All Buyer</h2>\n        <div className=\"overflow-x-auto w-full\">\n          <table className=\"table w-full \">\n            <thead>\n              <tr>\n                <th></th>\n                <th>Seller Name</th>\n                <th>Email</th>\n\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {buyers.map((buyer, i) => (\n                <AllbuyerTable\n                  key={buyer._id}\n                  buyer={buyer}\n                  confirmationModal={confirmationModal}\n                  i={i}\n                ></AllbuyerTable>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      {deletingBuyer && (\n        <ConfirmationModal\n          title={`Your are deleting ${deletingBuyer.name}`}\n          message={`Everything associated with this email: ${deletingBuyer.name}  will be deleted from database. \n          Since your are using firebase authentication, you must delete ${deletingBuyer.email} from there manually!`}\n          successAction={handleDelete}\n          successButtonName=\"Delete\"\n          modalData={deletingBuyer}\n          closeModal={closeModal}\n        ></ConfirmationModal>\n      )}\n    </div>\n  );\n};\n\nexport default Allbuyer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}