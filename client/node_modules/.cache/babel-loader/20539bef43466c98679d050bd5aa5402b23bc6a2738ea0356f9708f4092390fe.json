{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useQuery}from\"@tanstack/react-query\";import React,{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import ConfirmationModal from\"../../../Components/ConfirmationModal\";import MyOrdersTable from\"../../../Components/MyOrdersTable\";import{AuthContext}from\"../../../Context/AuthProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyOrders=function MyOrders(){var _useContext=useContext(AuthContext),user=_useContext.user;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),payOrder=_useState2[0],setPayOrder=_useState2[1];var _useQuery=useQuery({queryKey:[\"orders\"],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5001/myorders?email=\".concat(user===null||user===void 0?void 0:user.email),{headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"arkDeals\"))}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}},_callee);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}()}),_useQuery$data=_useQuery.data,orders=_useQuery$data===void 0?[]:_useQuery$data,refetch=_useQuery.refetch;var confirmationModal=function confirmationModal(order){setPayOrder(order);};var handlePay=function handlePay(order){console.log(order);};var handlePaymentPage=function handlePaymentPage(order){navigate(\"/dashboard/payment/\".concat(order._id));};var closeModal=function closeModal(){setPayOrder(null);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-base-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl\",children:\"My Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto w-full\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Laptop\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Seller Details\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order,i){return/*#__PURE__*/_jsx(MyOrdersTable,{order:order,confirmationModal:confirmationModal,i:i},order.pId);})})]})})]}),payOrder&&/*#__PURE__*/_jsx(ConfirmationModal,{title:\"Payment for \".concat(payOrder.product.productName),message:\"Your are going to pay $ \".concat(payOrder.product.resalePrice),successAction:handlePaymentPage,successButtonName:\"Go to Payment Page\",modalData:payOrder,closeModal:closeModal})]});};export default MyOrders;","map":{"version":3,"names":["useQuery","React","useContext","useState","useNavigate","toast","ConfirmationModal","MyOrdersTable","AuthContext","MyOrders","user","navigate","payOrder","setPayOrder","queryKey","queryFn","fetch","email","headers","authorization","localStorage","getItem","res","json","data","orders","refetch","confirmationModal","order","handlePay","console","log","handlePaymentPage","_id","closeModal","map","i","pId","product","productName","resalePrice"],"sources":["/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/src/Pages/Dashboard/Buyer/MyOrders.jsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport React, { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport ConfirmationModal from \"../../../Components/ConfirmationModal\";\nimport MyOrdersTable from \"../../../Components/MyOrdersTable\";\nimport { AuthContext } from \"../../../Context/AuthProvider\";\n\nconst MyOrders = () => {\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [payOrder, setPayOrder] = useState(null);\n  const { data: orders = [], refetch } = useQuery({\n    queryKey: [\"orders\"],\n    queryFn: async () => {\n      const res = await fetch(\n        `http://localhost:5001/myorders?email=${user?.email}`,\n        {\n          headers: {\n            authorization: `Bearer ${localStorage.getItem(\"arkDeals\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      return data;\n    },\n  });\n\n  const confirmationModal = (order) => {\n    setPayOrder(order);\n  };\n\n  const handlePay = (order) => {\n    console.log(order);\n    \n  };\n\n  const handlePaymentPage = (order) => {\n    navigate(`/dashboard/payment/${order._id}`)\n  }\n\n  const closeModal = () => {\n    setPayOrder(null);\n  };\n\n  return (\n    <div>\n      <div className=\"bg-base-100\">\n        <h2 className=\"text-center text-xl\">My Orders</h2>\n        <div className=\"overflow-x-auto w-full\">\n          <table className=\"table w-full \">\n            <thead>\n              <tr>\n                <th></th>\n                <th>Laptop</th>\n                <th>Seller Details</th>\n                <th>Price</th>\n                <th>Action</th>\n                <th>Status</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((order, i) => (\n                <MyOrdersTable\n                  key={order.pId}\n                  order={order}\n                  confirmationModal={confirmationModal}\n                  i={i}\n                ></MyOrdersTable>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      {payOrder && (\n        <ConfirmationModal\n          title={`Payment for ${payOrder.product.productName}`}\n          message={`Your are going to pay $ ${payOrder.product.resalePrice}`}\n          successAction={handlePaymentPage}\n          successButtonName=\"Go to Payment Page\"\n          modalData={payOrder}\n          closeModal={closeModal}\n        ></ConfirmationModal>\n      )}\n    </div>\n  );\n};\n\nexport default MyOrders;\n"],"mappings":"8dAAA,OAASA,QAAQ,KAAQ,uBAAuB,CAChD,MAAOC,MAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAOC,kBAAiB,KAAM,uCAAuC,CACrE,MAAOC,cAAa,KAAM,mCAAmC,CAC7D,OAASC,WAAW,KAAQ,+BAA+B,CAAC,wFAE5D,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,gBAAiBP,UAAU,CAACM,WAAW,CAAC,CAAhCE,IAAI,aAAJA,IAAI,CACZ,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,cAAgCD,QAAQ,CAAC,IAAI,CAAC,wCAAvCS,QAAQ,eAAEC,WAAW,eAC5B,cAAuCb,QAAQ,CAAC,CAC9Cc,QAAQ,CAAE,CAAC,QAAQ,CAAC,CACpBC,OAAO,mFAAE,uKACWC,MAAK,gDACmBN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,KAAK,EACnD,CACEC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC3D,CACF,CAAC,CACF,QAPKC,GAAG,qCAQUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,+CACHA,IAAI,uDACZ,+EACH,CAAC,CAAC,0BAdMA,IAAI,CAAEC,MAAM,yBAAG,EAAE,gBAAEC,OAAO,WAAPA,OAAO,CAgBlC,GAAMC,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,KAAK,CAAK,CACnCf,WAAW,CAACe,KAAK,CAAC,CACpB,CAAC,CAED,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAID,KAAK,CAAK,CAC3BE,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC,CAEpB,CAAC,CAED,GAAMI,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIJ,KAAK,CAAK,CACnCjB,QAAQ,8BAAuBiB,KAAK,CAACK,GAAG,EAAG,CAC7C,CAAC,CAED,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACvBrB,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,mBACE,oCACE,aAAK,SAAS,CAAC,aAAa,wBAC1B,WAAI,SAAS,CAAC,qBAAqB,UAAC,WAAS,EAAK,cAClD,YAAK,SAAS,CAAC,wBAAwB,uBACrC,eAAO,SAAS,CAAC,eAAe,wBAC9B,oCACE,mCACE,aAAS,cACT,oBAAI,QAAM,EAAK,cACf,oBAAI,gBAAc,EAAK,cACvB,oBAAI,OAAK,EAAK,cACd,oBAAI,QAAM,EAAK,cACf,oBAAI,QAAM,EAAK,GACZ,EACC,cACR,uBACGY,MAAM,CAACU,GAAG,CAAC,SAACP,KAAK,CAAEQ,CAAC,qBACnB,KAAC,aAAa,EAEZ,KAAK,CAAER,KAAM,CACb,iBAAiB,CAAED,iBAAkB,CACrC,CAAC,CAAES,CAAE,EAHAR,KAAK,CAACS,GAAG,CAIC,EAClB,CAAC,EACI,GACF,EACJ,GACF,CACLzB,QAAQ,eACP,KAAC,iBAAiB,EAChB,KAAK,uBAAiBA,QAAQ,CAAC0B,OAAO,CAACC,WAAW,CAAG,CACrD,OAAO,mCAA6B3B,QAAQ,CAAC0B,OAAO,CAACE,WAAW,CAAG,CACnE,aAAa,CAAER,iBAAkB,CACjC,iBAAiB,CAAC,oBAAoB,CACtC,SAAS,CAAEpB,QAAS,CACpB,UAAU,CAAEsB,UAAW,EAE1B,GACG,CAEV,CAAC,CAED,cAAezB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}