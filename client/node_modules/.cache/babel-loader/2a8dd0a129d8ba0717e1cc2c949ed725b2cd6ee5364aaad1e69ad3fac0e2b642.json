{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useQuery}from'@tanstack/react-query';import React,{useContext}from'react';import{toast}from'react-toastify';import MyreportedTable from'../../../Components/MyreportedTable';import{AuthContext}from'../../../Context/AuthProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyReported=function MyReported(){var _useContext=useContext(AuthContext),user=_useContext.user;var _useQuery=useQuery({queryKey:['items'],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5001/reported-item-buyer?email=\".concat(user===null||user===void 0?void 0:user.email));case 2:res=_context.sent;data=res.json();return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}},_callee);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}()}),_useQuery$data=_useQuery.data,items=_useQuery$data===void 0?[]:_useQuery$data,refetch=_useQuery.refetch;console.log(items);var handleSafe=function handleSafe(product){console.log(product);fetch(\"http://localhost:5001/reported-item/\".concat(product._id),{method:\"DELETE\",headers:{authorization:\"bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);refetch();toast.success(\"Product is marked as Safe!\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-base-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl\",children:\"My Reported Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto w-full\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Laptop\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Seller\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Message\"}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,i){return/*#__PURE__*/_jsx(MyreportedTable,{item:item,i:i,handleSafe:handleSafe},item._id);})})]})})]});};export default MyReported;","map":{"version":3,"names":["useQuery","React","useContext","toast","MyreportedTable","AuthContext","MyReported","user","queryKey","queryFn","fetch","email","res","data","json","items","refetch","console","log","handleSafe","product","_id","method","headers","authorization","localStorage","getItem","then","success","map","item","i"],"sources":["/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/src/Pages/Dashboard/Buyer/MyReported.jsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport React, { useContext } from 'react';\nimport { toast } from 'react-toastify';\nimport MyreportedTable from '../../../Components/MyreportedTable';\nimport { AuthContext } from '../../../Context/AuthProvider';\n\nconst MyReported = () => {\n    const { user } = useContext(AuthContext);\n    const { data: items=[],refetch } = useQuery({\n        queryKey: ['items'],\n        queryFn: async () => {\n            const res = await fetch(`http://localhost:5001/reported-item-buyer?email=${user?.email}`)\n            const data = res.json();\n            return data;\n        }\n    })\n    console.log(items);\n    const handleSafe = (product) => {\n        console.log(product);\n        fetch(`http://localhost:5001/reported-item/${product._id}`, {\n          method: \"DELETE\",\n          headers: {\n            authorization: `bearer ${localStorage.getItem(\"arkDeals\")}`,\n          },\n        })\n          .then((res) => res.json())\n          .then((data) => {\n            console.log(data);\n            refetch();\n            toast.success(\"Product is marked as Safe!\");\n          });\n      };\n    return (\n        <div className=\"bg-base-100\">\n      <h2 className=\"text-center text-xl\">My Reported Products</h2>\n      <div className=\"overflow-x-auto w-full\">\n        <table className=\"table w-full \">\n          <thead>\n            <tr>\n              <th></th>\n              <th>Laptop</th>\n              <th>Seller</th>\n              <th>Message</th>\n              <th></th>\n              <th></th>\n              \n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, i) => (\n              <MyreportedTable\n                key={item._id}\n                item={item}\n                i={i}\n                handleSafe={handleSafe}\n                \n              ></MyreportedTable>\n            ))}\n          </tbody>\n        </table>\n        {/* {deletingProduct && (\n          <ConfirmationModal\n            title={`Are your sure to delete ${deletingProduct.productName}`}\n            message={`This operation can not be undone`}\n            successAction={handleDelete}\n            successButtonName=\"Confirm Delete\"\n            modalData={deletingProduct}\n            closeModal={closeModal}\n          ></ConfirmationModal>\n        )} */}\n      </div>\n    </div>\n    );\n};\n\nexport default MyReported;"],"mappings":"oUAAA,OAASA,QAAQ,KAAQ,uBAAuB,CAChD,MAAOC,MAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAOC,gBAAe,KAAM,qCAAqC,CACjE,OAASC,WAAW,KAAQ,+BAA+B,CAAC,wFAE5D,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrB,gBAAiBJ,UAAU,CAACG,WAAW,CAAC,CAAhCE,IAAI,aAAJA,IAAI,CACZ,cAAmCP,QAAQ,CAAC,CACxCQ,QAAQ,CAAE,CAAC,OAAO,CAAC,CACnBC,OAAO,mFAAE,uKACaC,MAAK,2DAAoDH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,KAAK,EAAG,QAAnFC,GAAG,eACHC,IAAI,CAAGD,GAAG,CAACE,IAAI,EAAE,iCAChBD,IAAI,uDACd,+EACL,CAAC,CAAC,0BAPMA,IAAI,CAAEE,KAAK,yBAAC,EAAE,gBAACC,OAAO,WAAPA,OAAO,CAQ9BC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC,CAClB,GAAMI,WAAU,CAAG,QAAbA,WAAU,CAAIC,OAAO,CAAK,CAC5BH,OAAO,CAACC,GAAG,CAACE,OAAO,CAAC,CACpBV,KAAK,+CAAwCU,OAAO,CAACC,GAAG,EAAI,CAC1DC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC3D,CACF,CAAC,CAAC,CACCC,IAAI,CAAC,SAACf,GAAG,QAAKA,IAAG,CAACE,IAAI,EAAE,GAAC,CACzBa,IAAI,CAAC,SAACd,IAAI,CAAK,CACdI,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC,CACjBG,OAAO,EAAE,CACTb,KAAK,CAACyB,OAAO,CAAC,4BAA4B,CAAC,CAC7C,CAAC,CAAC,CACN,CAAC,CACH,mBACI,aAAK,SAAS,CAAC,aAAa,wBAC9B,WAAI,SAAS,CAAC,qBAAqB,UAAC,sBAAoB,EAAK,cAC7D,YAAK,SAAS,CAAC,wBAAwB,uBACrC,eAAO,SAAS,CAAC,eAAe,wBAC9B,oCACE,mCACE,aAAS,cACT,oBAAI,QAAM,EAAK,cACf,oBAAI,QAAM,EAAK,cACf,oBAAI,SAAO,EAAK,cAChB,aAAS,cACT,aAAS,GAEN,EACC,cACR,uBACGb,KAAK,CAACc,GAAG,CAAC,SAACC,IAAI,CAAEC,CAAC,qBACjB,KAAC,eAAe,EAEd,IAAI,CAAED,IAAK,CACX,CAAC,CAAEC,CAAE,CACL,UAAU,CAAEZ,UAAW,EAHlBW,IAAI,CAACT,GAAG,CAKI,EACpB,CAAC,EACI,GACF,EAWJ,GACF,CAEV,CAAC,CAED,cAAef,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}