{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useQuery}from\"@tanstack/react-query\";import React,{useState}from\"react\";import{toast}from\"react-toastify\";import ConfirmationModal from\"../../../Components/ConfirmationModal\";import ReportedTable from\"../../../Components/ReportedTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Reported=function Reported(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),deletingProduct=_useState2[0],setDeletingProduct=_useState2[1];var _useQuery=useQuery({queryKey:[\"items\"],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://ark-deals-server.vercel.app/reported-item\",{headers:{authorization:\"bearer \".concat(localStorage.getItem(\"arkDeals\"))}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}},_callee);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}()}),_useQuery$data=_useQuery.data,items=_useQuery$data===void 0?[]:_useQuery$data,refetch=_useQuery.refetch;var confirmationModal=function confirmationModal(product){setDeletingProduct(product);};var closeModal=function closeModal(){setDeletingProduct(null);};var handleSafe=function handleSafe(product){console.log(product);fetch(\"https://ark-deals-server.vercel.app/reported-item/\".concat(product._id),{method:\"DELETE\",headers:{authorization:\"bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);refetch();toast.success(\"Product is marked as Safe!\");});};var handleDelete=function handleDelete(product){console.log(product);if(product.advertised===true){fetch(\"https://ark-deals-server.vercel.app/delete-advertisement/\".concat(product._id),{method:\"DELETE\"}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.deletedCount>=1){refetch();}});}fetch(\"https://ark-deals-server.vercel.app/reported-item/\".concat(product._id),{method:\"DELETE\",headers:{authorization:\"bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);fetch(\"https://ark-deals-server.vercel.app/delete-product/\".concat(product._id),{method:\"DELETE\",headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"arkDeals\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.deletedCount===1){refetch();toast.warning(\"Product deleted successfully!\");}});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-base-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl\",children:\"Reported Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto w-full\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Laptop\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Seller\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reporter\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Message\"}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item,i){return/*#__PURE__*/_jsx(ReportedTable,{item:item,i:i,handleSafe:handleSafe,confirmationModal:confirmationModal},item._id);})})]}),deletingProduct&&/*#__PURE__*/_jsx(ConfirmationModal,{title:\"Are your sure to delete \".concat(deletingProduct.productName),message:\"This operation can not be undone\",successAction:handleDelete,successButtonName:\"Confirm Delete\",modalData:deletingProduct,closeModal:closeModal})]})]});};export default Reported;","map":{"version":3,"names":["useQuery","React","useState","toast","ConfirmationModal","ReportedTable","Reported","deletingProduct","setDeletingProduct","queryKey","queryFn","fetch","headers","authorization","localStorage","getItem","res","json","data","items","refetch","confirmationModal","product","closeModal","handleSafe","console","log","_id","method","then","success","handleDelete","advertised","deletedCount","warning","map","item","i","productName"],"sources":["/Users/abdurrahman/VsCode/WebDev/PGHERO/MileStone12/ark-deals-client/src/Pages/Dashboard/Admin/Reported.jsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport React, { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport ConfirmationModal from \"../../../Components/ConfirmationModal\";\nimport ReportedTable from \"../../../Components/ReportedTable\";\n\nconst Reported = () => {\n  const [deletingProduct, setDeletingProduct] = useState(null);\n  const { data: items = [], refetch } = useQuery({\n    queryKey: [\"items\"],\n    queryFn: async () => {\n      const res = await fetch(\n        `https://ark-deals-server.vercel.app/reported-item`,\n        {\n          headers: {\n            authorization: `bearer ${localStorage.getItem(\"arkDeals\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      return data;\n    },\n  });\n\n  const confirmationModal = (product) => {\n    setDeletingProduct(product);\n  };\n  const closeModal = () => {\n    setDeletingProduct(null);\n  };\n\n  const handleSafe = (product) => {\n    console.log(product);\n    fetch(`https://ark-deals-server.vercel.app/reported-item/${product._id}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: `bearer ${localStorage.getItem(\"arkDeals\")}`,\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        refetch();\n        toast.success(\"Product is marked as Safe!\");\n      });\n  };\n  const handleDelete = (product) => {\n    console.log(product);\n    if (product.advertised === true) {\n      fetch(\n        `https://ark-deals-server.vercel.app/delete-advertisement/${product._id}`,\n        {\n          method: \"DELETE\",\n        }\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          console.log(data);\n          if (data.deletedCount >= 1) {\n            refetch();\n          }\n        });\n    }\n    fetch(`https://ark-deals-server.vercel.app/reported-item/${product._id}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: `bearer ${localStorage.getItem(\"arkDeals\")}`,\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        fetch(\n          `https://ark-deals-server.vercel.app/delete-product/${product._id}`,\n          {\n            method: \"DELETE\",\n            headers: {\n              authorization: `Bearer ${localStorage.getItem(\"arkDeals\")}`,\n            },\n          }\n        )\n          .then((res) => res.json())\n          .then((data) => {\n            console.log(data);\n            if (data.deletedCount === 1) {\n              refetch();\n              toast.warning(\"Product deleted successfully!\");\n            }\n          });\n      });\n  };\n\n  return (\n    <div className=\"bg-base-100\">\n      <h2 className=\"text-center text-xl\">Reported Products</h2>\n      <div className=\"overflow-x-auto w-full\">\n        <table className=\"table w-full \">\n          <thead>\n            <tr>\n              <th></th>\n              <th>Laptop</th>\n              <th>Seller</th>\n              <th>Reporter</th>\n              <th>Message</th>\n              <th></th>\n              <th></th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, i) => (\n              <ReportedTable\n                key={item._id}\n                item={item}\n                i={i}\n                handleSafe={handleSafe}\n                confirmationModal={confirmationModal}\n              ></ReportedTable>\n            ))}\n          </tbody>\n        </table>\n        {deletingProduct && (\n          <ConfirmationModal\n            title={`Are your sure to delete ${deletingProduct.productName}`}\n            message={`This operation can not be undone`}\n            successAction={handleDelete}\n            successButtonName=\"Confirm Delete\"\n            modalData={deletingProduct}\n            closeModal={closeModal}\n          ></ConfirmationModal>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Reported;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}